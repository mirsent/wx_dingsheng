require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([0],{34:function(t,e,i){"use strict";var a=s(i(1)),n=s(i(35));function s(t){return t&&t.__esModule?t:{default:t}}new a.default(n.default).$mount()},35:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(37),n=i.n(a),s=i(42),l=!1;var r=function(t){l||i(36)},o=i(0)(n.a,s.a,r,null,null);o.options.__file="F:\\project\\DingSheng\\pages\\order\\order.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] order.vue: functional components are not supported with templates, they should use render functions."),e.default=o.exports},36:function(t,e){},37:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a,n=i(38),s=(a=n)&&a.__esModule?a:{default:a};var l=null;e.default={components:{uniDrawer:s.default},data:function(){return{rightDrawerVisible:!1,drawerTitle:"",drawerDemandVisible:!1,drawerStandardVisible:!1,aDemand:"",aDemandTel:"",aDemandLocation:"",aStandard:"",previewShow:!1,previewUrl:"",demandList:[],proList:[],standardList:[],originList:[],unitList:[],supply:"",sLocation:"",sFax:"",sTel:"",sBank:"",sAccount:"",sDate:"",demand:"",dFax:"",dTel:"",dLocation:"",proName:"",proStandard:"",proOrigin:"",proUnit:"",proNumber:"",proUnitPrice:"",proAmount:"",proCapitalAmount:"",proPackage:"",proContractExpS:"",proContractSMax:"",proContractExpE:"",proContractEMin:"",proPriceExpS:"",proPriceExpSMax:"",proPriceExpE:"",proPriceExpEMin:""}},onLoad:function(){var e=this;t.showLoading(),l=t.createCanvasContext("canvas"),t.request({url:this.$requestUrl+"get_order_info",method:"GET",success:function(t){var i=t.data.data;e.sFax=i.company.company_fax,e.supply=i.bill.company_name,e.sLocation=i.bill.location,e.sTel=i.bill.tel,e.sBank=i.bill.bank,e.sAccount=i.bill.account,e.sDate=i.today,e.demandList=i.demand,e.proList=i.product,e.standardList=i.standard,e.originList=i.origin,e.unitList=i.unit},fail:function(){},complete:function(){t.hideLoading()}})},methods:{createTable:function(){var e=this;t.showLoading();var i=this;t.request({url:i.$requestUrl+"convertUp",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{demand:i.demand,tel:i.dTel,location:i.dLocation,product:i.proName,standard:i.proStandard,origin:i.proOrigin,unit:i.proUnit,package:i.proPackage,number:i.proNumber,unit_price:i.proUnitPrice},success:function(a){t.hideLoading();var n=a.data.data;i.proAmount=n.amount,i.proCapitalAmount=n.capital_amount;l.setStrokeStyle("#ff0000"),l.setFontSize(20),l.setTextAlign("center"),l.fillText("购销合同",400,50),l.setFontSize(16),l.setTextAlign("left"),l.fillText("供方："+e.supply,30,100),l.setTextAlign("right"),l.fillText("需方："+e.demand,770,100),l.setTextAlign("left"),l.fillText("签字双方同意就以下条款达成交易：",30,130),l.fillText("一、",30,160),l.fillText("名称、数量、金额：",70,160),l.fillText("二、",30,310),l.fillText("质量标准：",70,310),l.fillText("按国家标准质量指标。",70,340),l.fillText("三、",30,370),l.fillText("交货地点：",70,370),l.fillText("供方仓库，供方待办运输，经协商运费由供方承担。",70,400),l.fillText("四、",30,430),l.fillText("交货时间：",70,430),l.fillText("需方办好电汇并传真给供方，电汇到账户后安排发货。",70,460),l.fillText("五、",30,490),l.fillText("包装：",70,490),l.fillText(e.proPackage+"，包装不回收。",70,520),l.fillText("六、",30,550),l.fillText("结算方式：",70,550),l.fillText("电汇结算。",70,580),l.fillText("七、",30,610),l.fillText("解决合同纠纷的方式：",70,610),l.fillText("友好协商，如协商不成，一方可向法院申请裁决。",70,640),l.fillText("八、",30,670),l.fillText("验收：",70,670),l.fillText("货至需方，需方检验货物合格后收货。",70,700),l.fillText("九、",30,730),l.fillText("有效期：",70,730),l.fillText("合同经双方盖章后生效，合同有效期："+e.proContractExpS+"至"+e.proContractExpE+"; ",70,760),l.fillText("价格有效期："+e.proPriceExpS+"至"+e.proPriceExpE+"。",70,790),l.fillText("十、",30,820),l.fillText("其他约定事项：",70,820),l.fillText("如确认无误，请于一个工作日内盖章回传。",70,850),l.fillText("供方："+e.supply,30,910),l.fillText("需方："+e.demand,500,910),l.fillText("地址："+e.sLocation,30,940),l.fillText("传真："+e.dFax,500,940),l.fillText("传真："+e.sFax,30,970),l.fillText("电话："+e.dTel,500,970),l.fillText("电话："+e.sTel,30,1e3),l.fillText("开户行："+e.sBank,30,1030),l.fillText("账号："+e.sAccount,30,1060),l.fillText("日期："+e.sDate,30,1090),l.fillText("日期："+e.sDate,500,1090),l.moveTo(342,765),l.lineTo(585,765),l.stroke(),l.moveTo(165,795),l.lineTo(408,795),l.stroke(),l.setStrokeStyle("Black"),l.setLineWidth(1),l.strokeRect(30,190,740,90),l.moveTo(30,220),l.lineTo(770,220),l.stroke(),l.moveTo(30,250),l.lineTo(770,250),l.stroke(),l.moveTo(190,190),l.lineTo(190,280),l.stroke(),l.moveTo(410,190),l.lineTo(410,250),l.stroke(),l.moveTo(482,190),l.lineTo(482,250),l.stroke(),l.moveTo(554,190),l.lineTo(554,250),l.stroke(),l.moveTo(626,190),l.lineTo(626,250),l.stroke(),l.moveTo(698,190),l.lineTo(698,250),l.stroke(),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("产品名称",110,205),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("规格",300,205),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("产地",446,205),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("单位",518,205),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("数量",590,205),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("单价",662,205),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("金额",734,205),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText(e.proName,110,235),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText(e.proStandard,300,235),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText(e.proOrigin,446,235),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText(e.proUnit,518,235),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText(e.proNumber,590,235),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText(e.proUnitPrice,662,235),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText(e.proAmount,734,235),l.setTextAlign("center"),l.setTextBaseline("middle"),l.fillText("合计金额(大写)",110,265),l.setTextAlign("left"),l.setTextBaseline("middle"),l.fillText(e.proCapitalAmount,220,265),l.draw(),t.canvasToTempFilePath({canvasId:"canvas",fileType:"jpg",success:function(t){console.log(t.tempFilePath),i.previewUrl=t.tempFilePath,i.previewShow=!0}})},fail:function(){}})},addDemand:function(){this.drawerTitle="添加需方信息",this.drawerDemandVisible=!0,this.rightDrawerVisible=!0},addDemandChange:function(t){this.aDemand=t.detail.value},addDemandTelChange:function(t){this.aDemandTel=t.detail.value},addDemandLocationChange:function(t){this.aDemandLocation=t.detail.value},confirmDemand:function(){var e=this;t.showLoading(),t.request({url:this.$requestUrl+"add_demand",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{name:this.aDemand,tel:this.aDemandTel,location:this.aDemandLocation},success:function(i){e.demandList=i.data.data,t.showToast({title:"添加成功",mask:!1,duration:1500})},fail:function(){t.showToast({title:"请求出错，稍后重试",mask:!1,duration:1500})},complete:function(){e.drawerDemandVisible=!1,e.rightDrawerVisible=!1,t.hideLoading()}})},cancleDemand:function(){this.drawerDemandVisible=!1,this.rightDrawerVisible=!1},addStandard:function(){this.drawerTitle="添加规格",this.drawerStandardVisible=!0,this.rightDrawerVisible=!0},addStandardChange:function(t){this.aStandard=t.detail.value},confirmStandard:function(){var e=this;t.showLoading(),t.request({url:this.$requestUrl+"add_standard",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{standard_name:this.aStandard},success:function(i){e.standardList=i.data.data,t.showToast({title:"添加成功",mask:!1,duration:1500})},fail:function(){t.showToast({title:"请求出错，稍后重试",mask:!1,duration:1500})},complete:function(){e.drawerStandardVisible=!1,e.rightDrawerVisible=!1,t.hideLoading()}})},cancleStandard:function(){this.drawerStandardVisible=!1,this.rightDrawerVisible=!1},saveImg:function(){var e=this;t.saveImageToPhotosAlbum({filePath:e.previewUrl,success:function(){e.previewShow=!1,console.log("save success"),t.showToast({title:"保存成功！",mask:!1,duration:1500})}})},cancleImg:function(){this.previewShow=!1},demandChange:function(e){var i=this;this.demand=this.demandList[e.detail.value],t.request({url:this.$requestUrl+"get_demand_by_name",method:"GET",data:{demand_name:this.demandList[e.detail.value]},success:function(t){var e=t.data.data;i.dFax=e.fax,i.dLocation=e.location,i.dTel=e.tel},fail:function(){},complete:function(){}})},proChange:function(t){this.proName=this.proList[t.detail.value]},standardChange:function(t){this.proStandard=this.standardList[t.detail.value]},originChange:function(t){this.proOrigin=this.originList[t.detail.value]},unitChange:function(t){this.proUnit=this.unitList[t.detail.value]},packageChange:function(t){this.proPackage=t.detail.value},numberChange:function(t){this.proNumber=t.detail.value},unitPriceChange:function(t){this.proUnitPrice=t.detail.value},dateChange:function(t){var e=t.detail.value.split("-");this.sDate=parseInt(e[0])+"年"+parseInt(e[1])+"月"+parseInt(e[2])+"日"},contractExpSChange:function(t){var e=t.detail.value,i=e.split("-");this.proContractExpS=parseInt(i[0])+"年"+parseInt(i[1])+"月"+parseInt(i[2])+"日",this.proContractEMin=e},contractExpEChange:function(t){var e=t.detail.value,i=e.split("-");this.proContractExpE=parseInt(i[0])+"年"+parseInt(i[1])+"月"+parseInt(i[2])+"日",this.proContractSMax=e},priceExpSChange:function(t){var e=t.detail.value,i=e.split("-");this.proPriceExpS=parseInt(i[0])+"年"+parseInt(i[1])+"月"+parseInt(i[2])+"日",this.proPriceExpEMin=e},priceExpEChange:function(t){var e=t.detail.value,i=e.split("-");this.proPriceExpE=parseInt(i[0])+"年"+parseInt(i[1])+"月"+parseInt(i[2])+"日",this.proPriceExpSMax=e}}}}).call(e,i(2).default)},38:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(40),n=i.n(a),s=i(41),l=!1;var r=function(t){l||i(39)},o=i(0)(n.a,s.a,r,"data-v-397c4292",null);o.options.__file="F:\\project\\DingSheng\\components\\uni-drawer.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] uni-drawer.vue: functional components are not supported with templates, they should use render functions."),e.default=o.exports},39:function(t,e){},40:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{visible:{type:Boolean,default:!1},mode:String,mask:{type:[Boolean,String],default:!0}},data:function(){return{rightMode:!1,catchtouchmove:!1}},computed:{showMask:function(){return"true"===String(this.mask)}},created:function(){this.rightMode="right"===this.mode,this.catchtouchmove=!0},methods:{close:function(){this.$emit("close")}}}},41:function(t,e,i){"use strict";var a=function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"uni-drawer",class:{"uni-drawer-visible":this.visible,"uni-drawer-right":this.rightMode},attrs:{catchtouchmove:this.catchtouchmove}},[this.showMask?e("view",{staticClass:"uni-drawer-mask",attrs:{eventid:"2sy-0"},on:{tap:this.close}}):this._e(),e("view",{staticClass:"uni-drawer-content"},[this._t("default",null,{mpcomid:"TAu-0"})],2)])};a._withStripped=!0;var n={render:a,staticRenderFns:[]};e.a=n},42:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("uni-drawer",{attrs:{visible:t.rightDrawerVisible,mode:"right",eventid:"P3w-8",mpcomid:"CeJ-0"},on:{close:t.closeRightDrawer}},[i("view",{staticClass:"drawer-content"},[i("view",{staticClass:"title"},[t._v(t._s(t.drawerTitle))]),t.drawerDemandVisible?i("view",[i("input",{attrs:{type:"text",placeholder:"需方",eventid:"w85-0"},on:{blur:t.addDemandChange}}),i("input",{attrs:{type:"text",placeholder:"需方电话",eventid:"CYV-1"},on:{blur:t.addDemandTelChange}}),i("input",{attrs:{type:"text",placeholder:"需方地址",eventid:"j8b-2"},on:{blur:t.addDemandLocationChange}}),i("view",{staticClass:"btn-group"},[i("button",{attrs:{type:"primary",size:"mini",eventid:"9bv-3"},on:{tap:t.confirmDemand}},[t._v("确定")]),i("button",{attrs:{type:"warn",size:"mini",eventid:"yGr-4"},on:{tap:t.cancleDemand}},[t._v("取消")])],1)]):t._e(),t.drawerStandardVisible?i("view",[i("input",{attrs:{type:"text",placeholder:"规格",eventid:"J6D-5"},on:{blur:t.addStandardChange}}),i("view",{staticClass:"btn-group"},[i("button",{attrs:{type:"primary",size:"mini",eventid:"Yd8-6"},on:{tap:t.confirmStandard}},[t._v("确定")]),i("button",{attrs:{type:"warn",size:"mini",eventid:"D3d-7"},on:{tap:t.cancleStandard}},[t._v("取消")])],1)]):t._e()])]),i("view",{staticClass:"uni-list"},[i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("需方")]),i("input",{attrs:{type:"text",value:t.demand,placeholder:"请输入需方"}})]),i("view",{attrs:{eventid:"BkJ-9"},on:{tap:t.addDemand}},[i("image",{staticClass:"icon",attrs:{src:"../../static/image/add.png",mode:""}})]),i("picker",{staticClass:"picker-item",attrs:{mode:"selector",range:t.demandList,eventid:"fW6-10"},on:{change:t.demandChange}},[i("image",{staticClass:"icon",attrs:{src:"../../static/image/select.png",mode:""}})])],1)]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("需方电话")]),i("input",{attrs:{type:"text",value:t.dTel,placeholder:"请输入需方电话"}})])])]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("需方地址")]),i("input",{attrs:{type:"text",value:t.dLocation,placeholder:"请输入需方地址"}})])])]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("产品名称")]),i("input",{attrs:{type:"text",value:t.proName,placeholder:"请输入产品名称"}})]),i("picker",{staticClass:"picker-item",attrs:{mode:"selector",range:t.proList,eventid:"dUJ-11"},on:{change:t.proChange}},[i("image",{staticClass:"icon",attrs:{src:"../../static/image/select.png",mode:""}})])],1)]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("规格")]),i("input",{attrs:{type:"text",value:t.proStandard,placeholder:"请输入规格"}})]),i("view",{attrs:{eventid:"huk-12"},on:{tap:t.addStandard}},[i("image",{staticClass:"icon",attrs:{src:"../../static/image/add.png",mode:""}})]),i("picker",{staticClass:"picker-item",attrs:{mode:"selector",range:t.standardList,eventid:"oqd-13"},on:{change:t.standardChange}},[i("image",{staticClass:"icon",attrs:{src:"../../static/image/select.png",mode:""}})])],1)]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("产地")]),i("input",{attrs:{type:"text",value:t.proOrigin,placeholder:"请输入产地"}})]),i("picker",{staticClass:"picker-item",attrs:{mode:"selector",range:t.originList,eventid:"cZm-14"},on:{change:t.originChange}},[i("image",{staticClass:"icon",attrs:{src:"../../static/image/select.png",mode:""}})])],1)]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("单位")]),i("input",{attrs:{type:"text",value:t.proUnit,placeholder:"请输入单位"}})]),i("picker",{staticClass:"picker-item",attrs:{mode:"selector",range:t.unitList,eventid:"PTf-15"},on:{change:t.unitChange}},[i("image",{staticClass:"icon",attrs:{src:"../../static/image/select.png",mode:""}})])],1)]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("包装")]),i("input",{attrs:{type:"text",value:"",placeholder:"请输入包装",eventid:"GHZ-16"},on:{blur:t.packageChange}})])])]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("数量")]),i("input",{attrs:{type:"number",value:"",placeholder:"请输入数量",eventid:"hdW-17"},on:{blur:t.numberChange}})])])]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[i("view",{staticClass:"input-group"},[i("text",[t._v("单价")]),i("input",{attrs:{type:"digit",value:"",placeholder:"请输入单价",eventid:"wgu-18"},on:{blur:t.unitPriceChange}})])])]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[t._m(0),i("view",{staticClass:"picker-box"},[i("picker",{staticClass:"picker-item picker-time",attrs:{mode:"date",end:t.proContractSMax,eventid:"V4u-19"},on:{change:t.contractExpSChange}},[i("input",{attrs:{type:"text",value:t.proContractExpS,placeholder:"请选择日期",disabled:""}})]),i("text",{staticStyle:{"margin-right":"8px"}},[t._v("-")]),i("picker",{staticClass:"picker-item picker-time",attrs:{mode:"date",start:t.proContractEMin,eventid:"Xku-20"},on:{change:t.contractExpEChange}},[i("input",{attrs:{type:"text",value:t.proContractExpE,placeholder:"请选择日期",disabled:""}})])],1)])]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[t._m(1),i("view",{staticClass:"picker-box"},[i("picker",{staticClass:"picker-item picker-time",attrs:{mode:"date",end:t.proPriceExpSMax,eventid:"5Yp-21"},on:{change:t.priceExpSChange}},[i("input",{attrs:{type:"text",value:t.proPriceExpS,placeholder:"请选择日期",disabled:""}})]),i("text",{staticStyle:{"margin-right":"8px"}},[t._v("-")]),i("picker",{staticClass:"picker-item picker-time",attrs:{mode:"date",start:t.proPriceExpEMin,eventid:"dmI-22"},on:{change:t.priceExpEChange}},[i("input",{attrs:{type:"text",value:t.proPriceExpE,placeholder:"请选择日期",disabled:""}})])],1)])]),i("view",{staticClass:"uni-list-cell"},[i("view",{staticClass:"uni-list-cell-navigate"},[t._m(2),i("picker",{staticClass:"picker-item picker-time",attrs:{mode:"date",eventid:"Lns-23"},on:{change:t.dateChange}},[i("view",{staticClass:"picker-box"},[i("input",{attrs:{type:"text",value:t.sDate,placeholder:"请选择日期",disabled:""}}),i("image",{staticClass:"icon",attrs:{src:"../../static/image/select.png",mode:""}})])])],1)])]),i("button",{staticClass:"btn-create",attrs:{type:"button",eventid:"ffR-24"},on:{tap:t.createTable}},[t._v("制作")]),i("canvas",{staticClass:"canvas-element",attrs:{"canvas-id":"canvas"}}),i("view",{directives:[{name:"show",rawName:"v-show",value:t.previewShow,expression:"previewShow"}],staticClass:"mask"},[i("view",{staticClass:"preview"},[i("image",{attrs:{src:t.previewUrl,mode:"widthFix"}}),i("view",[i("button",{staticClass:"btn-save",attrs:{type:"default",size:"mini",eventid:"fxG-25"},on:{tap:t.saveImg}},[t._v("保存")]),i("button",{attrs:{type:"default",size:"mini",eventid:"zrD-26"},on:{tap:t.cancleImg}},[t._v("取消")])],1)])])],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-group"},[e("text",[this._v("合同有效期")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-group"},[e("text",[this._v("价格有限期")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"input-group"},[e("text",[this._v("合同日期")])])}]};e.a=n}},[34]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/order.js.map